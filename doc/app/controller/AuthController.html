<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="ru">
<head>
<!-- Generated by javadoc (15) on Fri Apr 30 09:25:56 MSK 2021 -->
<title>AuthController</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-04-30">
<meta name="description" content="declaration: package: app.controller, class: AuthController">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">app.controller</a></div>
<h1 title="Class AuthController" class="title">Class AuthController</h1>
</div>
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">app.controller.AuthController</div>
</div>
<section class="description">
<hr>
<pre>@Controller
@RequestMapping("/auth")
public class <span class="type-name-label">AuthController</span>
extends java.lang.Object</pre>
<div class="block">Authorisation logic server.
 <p>
 Provides mappings for login and registration.
 <p>
 Website supports 2 types of authorisation:
 <ul>
 <li> Via a email
 <li> Via an oauth2 service
 </ul>
 Requests on types:
 <ul>
 <li> <b>email</b> - it accepts requests on login and register
 <li> <b>oauth</b> - it accepts forwards from the <a href="oauth/OauthController.html" title="class in app.controller.oauth"><code>OauthController</code></a>
 </ul>
 Either it sends parsed url to oauth buttons.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Fields</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Field</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>protected static org.apache.log4j.Logger</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#emailLogger">emailLogger</a></span></code></th>
<td class="col-last">
<div class="block">Logger for recording codes and tokens in the process of the oauth authorisation</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private static com.google.gson.Gson</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#gson">gson</a></span></code></th>
<td class="col-last">
<div class="block">Json parser</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private <a href="../database/service/userService/types/MailUserService.html" title="interface in app.database.service.userService.types">MailUserService</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#mailService">mailService</a></span></code></th>
<td class="col-last">
<div class="block">Service for interacting with mail users</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="../database/service/NodeService.html" title="interface in app.database.service">NodeService</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#nodeService">nodeService</a></span></code></th>
<td class="col-last">
<div class="block">Service for interacting with nodes</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>protected static org.apache.log4j.Logger</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#oauthLogger">oauthLogger</a></span></code></th>
<td class="col-last">
<div class="block">Logger for recording codes and tokens in the process of the oauth authorisation</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="../database/service/userService/types/OauthUserService.html" title="interface in app.database.service.userService.types">OauthUserService</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#oauthService">oauthService</a></span></code></th>
<td class="col-last">
<div class="block">Service for interacting with oauth users</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private java.util.HashMap&lt;java.lang.String,&#8203;java.util.Properties&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#propsMap">propsMap</a></span></code></th>
<td class="col-last">
<div class="block">Contains properties for each oauth service
 [provider name]: [Properties]</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="../database/service/RefreshService.html" title="interface in app.database.service">RefreshService</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#refreshService">refreshService</a></span></code></th>
<td class="col-last">
<div class="block">Service for interacting with refresh tokens</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private static <a href="../security/secretFactory/types/StateFactory.html" title="class in app.security.secretFactory.types">StateFactory</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#stateFactory">stateFactory</a></span></code></th>
<td class="col-last">
<div class="block">Factory for parsing state - string for identifying user for oauth service</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private static <a href="../security/secretFactory/types/EmailTokenFactory.html" title="class in app.security.secretFactory.types">EmailTokenFactory</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#tokenFactory">tokenFactory</a></span></code></th>
<td class="col-last">
<div class="block">Factory for producing email tokens</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private <a href="../database/service/userService/UserService.html" title="interface in app.database.service.userService">UserService</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#userService">userService</a></span></code></th>
<td class="col-last">
<div class="block">Service for interacting with all types of users</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="../database/service/VarService.html" title="interface in app.database.service">VarService</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#varService">varService</a></span></code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Constructors</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Constructor</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E(app.database.service.userService.types.MailUserService,app.database.service.userService.types.OauthUserService,app.database.service.userService.UserService,app.database.service.RefreshService,app.database.service.NodeService,app.database.service.VarService)">AuthController</a></span>&#8203;(<a href="../database/service/userService/types/MailUserService.html" title="interface in app.database.service.userService.types">MailUserService</a>&nbsp;mailService,
<a href="../database/service/userService/types/OauthUserService.html" title="interface in app.database.service.userService.types">OauthUserService</a>&nbsp;oauthService,
<a href="../database/service/userService/UserService.html" title="interface in app.database.service.userService">UserService</a>&nbsp;userService,
<a href="../database/service/RefreshService.html" title="interface in app.database.service">RefreshService</a>&nbsp;refreshService,
<a href="../database/service/NodeService.html" title="interface in app.database.service">NodeService</a>&nbsp;nodeService,
<a href="../database/service/VarService.html" title="interface in app.database.service">VarService</a>&nbsp;varService)</code></th>
<td class="col-last">
<div class="block">Class constructor injecting user services</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#attachTokens(javax.servlet.http.HttpServletResponse,app.database.model.user.User)">attachTokens</a></span>&#8203;(javax.servlet.http.HttpServletResponse&nbsp;response,
<a href="../database/model/user/User.html" title="class in app.database.model.user">User</a>&nbsp;user)</code></th>
<td class="col-last">
<div class="block">Adds cookies to the response:
 
  JWT token
  Refresh token
 </div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>java.util.HashMap&lt;java.lang.String,&#8203;java.lang.String&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getBtnUrl(javax.servlet.http.HttpServletResponse)">getBtnUrl</a></span>&#8203;(javax.servlet.http.HttpServletResponse&nbsp;response)</code></th>
<td class="col-last">
<div class="block">Mapping for getting urls for oauth authorising.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#login(app.controller.util.json.auth.JsonForm,javax.servlet.http.HttpServletResponse)">login</a></span>&#8203;(<a href="util/json/auth/JsonForm.html" title="class in app.controller.util.json.auth">JsonForm</a>&nbsp;jsonForm,
javax.servlet.http.HttpServletResponse&nbsp;response)</code></th>
<td class="col-last">
<div class="block">Mapping for login users via an email.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="util/json/auth/JsonAnswer.html" title="class in app.controller.util.json.auth">JsonAnswer</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#logout(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)">logout</a></span>&#8203;(javax.servlet.http.HttpServletRequest&nbsp;request,
javax.servlet.http.HttpServletResponse&nbsp;response)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#oauth(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)">oauth</a></span>&#8203;(javax.servlet.http.HttpServletRequest&nbsp;request,
javax.servlet.http.HttpServletResponse&nbsp;response)</code></th>
<td class="col-last">
<div class="block">Mapping for oauth authorising.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#register(app.controller.util.json.auth.JsonForm,javax.servlet.http.HttpServletResponse)">register</a></span>&#8203;(<a href="util/json/auth/JsonForm.html" title="class in app.controller.util.json.auth">JsonForm</a>&nbsp;jsonForm,
javax.servlet.http.HttpServletResponse&nbsp;response)</code></th>
<td class="col-last">
<div class="block">Mapping for register users via an email.</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>private &lt;T extends <a href="../database/model/user/User.html" title="class in app.database.model.user">User</a>&gt;<br>T</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#wrapUserTemplate(T)">wrapUserTemplate</a></span>&#8203;(T&nbsp;user)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field.detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="oauthLogger">
<h3>oauthLogger</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">org.apache.log4j.Logger</span>&nbsp;<span class="member-name">oauthLogger</span></div>
<div class="block">Logger for recording codes and tokens in the process of the oauth authorisation</div>
</section>
</li>
<li>
<section class="detail" id="emailLogger">
<h3>emailLogger</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">org.apache.log4j.Logger</span>&nbsp;<span class="member-name">emailLogger</span></div>
<div class="block">Logger for recording codes and tokens in the process of the oauth authorisation</div>
</section>
</li>
<li>
<section class="detail" id="stateFactory">
<h3>stateFactory</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="../security/secretFactory/types/StateFactory.html" title="class in app.security.secretFactory.types">StateFactory</a></span>&nbsp;<span class="member-name">stateFactory</span></div>
<div class="block">Factory for parsing state - string for identifying user for oauth service</div>
</section>
</li>
<li>
<section class="detail" id="tokenFactory">
<h3>tokenFactory</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="../security/secretFactory/types/EmailTokenFactory.html" title="class in app.security.secretFactory.types">EmailTokenFactory</a></span>&nbsp;<span class="member-name">tokenFactory</span></div>
<div class="block">Factory for producing email tokens</div>
</section>
</li>
<li>
<section class="detail" id="gson">
<h3>gson</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">com.google.gson.Gson</span>&nbsp;<span class="member-name">gson</span></div>
<div class="block">Json parser</div>
</section>
</li>
<li>
<section class="detail" id="mailService">
<h3>mailService</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../database/service/userService/types/MailUserService.html" title="interface in app.database.service.userService.types">MailUserService</a></span>&nbsp;<span class="member-name">mailService</span></div>
<div class="block">Service for interacting with mail users</div>
</section>
</li>
<li>
<section class="detail" id="oauthService">
<h3>oauthService</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../database/service/userService/types/OauthUserService.html" title="interface in app.database.service.userService.types">OauthUserService</a></span>&nbsp;<span class="member-name">oauthService</span></div>
<div class="block">Service for interacting with oauth users</div>
</section>
</li>
<li>
<section class="detail" id="userService">
<h3>userService</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../database/service/userService/UserService.html" title="interface in app.database.service.userService">UserService</a></span>&nbsp;<span class="member-name">userService</span></div>
<div class="block">Service for interacting with all types of users</div>
</section>
</li>
<li>
<section class="detail" id="refreshService">
<h3>refreshService</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../database/service/RefreshService.html" title="interface in app.database.service">RefreshService</a></span>&nbsp;<span class="member-name">refreshService</span></div>
<div class="block">Service for interacting with refresh tokens</div>
</section>
</li>
<li>
<section class="detail" id="nodeService">
<h3>nodeService</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../database/service/NodeService.html" title="interface in app.database.service">NodeService</a></span>&nbsp;<span class="member-name">nodeService</span></div>
<div class="block">Service for interacting with nodes</div>
</section>
</li>
<li>
<section class="detail" id="varService">
<h3>varService</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../database/service/VarService.html" title="interface in app.database.service">VarService</a></span>&nbsp;<span class="member-name">varService</span></div>
</section>
</li>
<li>
<section class="detail" id="propsMap">
<h3>propsMap</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">java.util.HashMap&lt;java.lang.String,&#8203;java.util.Properties&gt;</span>&nbsp;<span class="member-name">propsMap</span></div>
<div class="block">Contains properties for each oauth service
 [provider name]: [Properties]</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(app.database.service.userService.types.MailUserService,app.database.service.userService.types.OauthUserService,app.database.service.userService.UserService,app.database.service.RefreshService,app.database.service.NodeService,app.database.service.VarService)">
<h3>AuthController</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name">AuthController</span>&#8203;(<span class="parameters"><a href="../database/service/userService/types/MailUserService.html" title="interface in app.database.service.userService.types">MailUserService</a>&nbsp;mailService,
<a href="../database/service/userService/types/OauthUserService.html" title="interface in app.database.service.userService.types">OauthUserService</a>&nbsp;oauthService,
<a href="../database/service/userService/UserService.html" title="interface in app.database.service.userService">UserService</a>&nbsp;userService,
<a href="../database/service/RefreshService.html" title="interface in app.database.service">RefreshService</a>&nbsp;refreshService,
<a href="../database/service/NodeService.html" title="interface in app.database.service">NodeService</a>&nbsp;nodeService,
<a href="../database/service/VarService.html" title="interface in app.database.service">VarService</a>&nbsp;varService)</span>
               throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Class constructor injecting user services</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mailService</code> - injects basic users service</dd>
<dd><code>oauthService</code> - injects oauth users service</dd>
<dd><code>userService</code> - injects all users service</dd>
<dd><code>refreshService</code> - injects refresh token service</dd>
<dd><code>nodeService</code> - injects nodes service</dd>
<dd><code>varService</code> - </dd>
<dt>Throws:</dt>
<dd><code>java.io.IOException</code> - if props file doesn't exist</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="login(app.controller.util.json.auth.JsonForm,javax.servlet.http.HttpServletResponse)">
<h3>login</h3>
<div class="member-signature"><span class="annotations">@ResponseBody
@PostMapping(path="/login",
             consumes="application/json",
             produces="application/json")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name">login</span>&#8203;(<span class="parameters">@RequestBody
<a href="util/json/auth/JsonForm.html" title="class in app.controller.util.json.auth">JsonForm</a>&nbsp;jsonForm,
javax.servlet.http.HttpServletResponse&nbsp;response)</span></div>
<div class="block">Mapping for login users via an email.
 Checks existing of the email and validates the password.
 If it all are right, returns positive answer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>jsonForm</code> - json form, containing email and password</dd>
<dd><code>response</code> - response to attach JWT and Refresh tokens</dd>
<dt>Returns:</dt>
<dd>json answer, containing if login is confirmed and the message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="register(app.controller.util.json.auth.JsonForm,javax.servlet.http.HttpServletResponse)">
<h3>register</h3>
<div class="member-signature"><span class="annotations">@ResponseBody
@PostMapping(path="/register",
             consumes="application/json",
             produces="application/json")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name">register</span>&#8203;(<span class="parameters">@RequestBody
<a href="util/json/auth/JsonForm.html" title="class in app.controller.util.json.auth">JsonForm</a>&nbsp;jsonForm,
javax.servlet.http.HttpServletResponse&nbsp;response)</span></div>
<div class="block">Mapping for register users via an email.
 Checks existing of the email and validates email and password.
 If it all are right, returns positive answer and saves new user into the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>jsonForm</code> - json form, containing email and password</dd>
<dd><code>response</code> - response to attach JWT and Refresh tokens</dd>
<dt>Returns:</dt>
<dd>json answer, containing if register is confirmed and the message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="logout(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)">
<h3>logout</h3>
<div class="member-signature"><span class="annotations">@ResponseBody
@PostMapping(path="/logout",
             produces="application/json")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="util/json/auth/JsonAnswer.html" title="class in app.controller.util.json.auth">JsonAnswer</a></span>&nbsp;<span class="member-name">logout</span>&#8203;(<span class="parameters">javax.servlet.http.HttpServletRequest&nbsp;request,
javax.servlet.http.HttpServletResponse&nbsp;response)</span></div>
</section>
</li>
<li>
<section class="detail" id="oauth(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)">
<h3>oauth</h3>
<div class="member-signature"><span class="annotations">@GetMapping("/oauth")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name">oauth</span>&#8203;(<span class="parameters">javax.servlet.http.HttpServletRequest&nbsp;request,
javax.servlet.http.HttpServletResponse&nbsp;response)</span></div>
<div class="block">Mapping for oauth authorising. If received oauth id doesn't exist in the database,
 creates it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>request</code> - containing oauth id</dd>
<dd><code>response</code> - for attaching JWT and Refresh tokens</dd>
<dt>Returns:</dt>
<dd>redirect to the home page</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBtnUrl(javax.servlet.http.HttpServletResponse)">
<h3>getBtnUrl</h3>
<div class="member-signature"><span class="annotations">@ResponseBody
@PostMapping(path="/url",
             produces="application/json")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.HashMap&lt;java.lang.String,&#8203;java.lang.String&gt;</span>&nbsp;<span class="member-name">getBtnUrl</span>&#8203;(<span class="parameters">javax.servlet.http.HttpServletResponse&nbsp;response)</span>
                                                               throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Mapping for getting urls for oauth authorising.
 It attaches state cookie to the response and inserts it
 into the button's link.
 Button on the page will redirect user to this link.
 User will authorise on this service and the service will
 send request to the <a href="oauth/OauthController.html#oauthEndpoint(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)"><code>OauthController.oauthEndpoint(HttpServletRequest, HttpServletResponse)</code></a></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>response</code> - response for sending errors</dd>
<dt>Returns:</dt>
<dd>json map with link for each provider</dd>
<dt>Throws:</dt>
<dd><code>java.io.IOException</code> - if an input or output error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="attachTokens(javax.servlet.http.HttpServletResponse,app.database.model.user.User)">
<h3>attachTokens</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">attachTokens</span>&#8203;(<span class="parameters">javax.servlet.http.HttpServletResponse&nbsp;response,
<a href="../database/model/user/User.html" title="class in app.database.model.user">User</a>&nbsp;user)</span></div>
<div class="block">Adds cookies to the response:
 <ul>
 <li> JWT token
 <li> Refresh token
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>response</code> - for attaching cookies</dd>
<dd><code>user</code> - for parsing JWT token</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="wrapUserTemplate(T)">
<h3 id="wrapUserTemplate(app.database.model.user.User)">wrapUserTemplate</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="type-parameters">&lt;T extends <a href="../database/model/user/User.html" title="class in app.database.model.user">User</a>&gt;</span>&nbsp;<span class="return-type">T</span>&nbsp;<span class="member-name">wrapUserTemplate</span>&#8203;(<span class="parameters">T&nbsp;user)</span></div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
</footer>
</div>
</div>
</body>
</html>
